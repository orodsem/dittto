{% extends 'base.html.twig' %}

{% block body %}
    <h1>Dashboard</h1>

    <div id="piechart"></div>
    <input type="hidden" id="user-vs-total" value="{{ userVsTotal }}">

{% endblock %}

{% block javascripts %}
    <script type="text/javascript">
        $(document).ready(function() {
            // Load google charts
            google.charts.load('current', {'packages':['corechart']});
            google.charts.setOnLoadCallback(drawChart);

            // Draw the chart and set the chart values
            function drawChart() {
                var userVsTotal = $('#user-vs-total').val();
                var userVsTotalObj = JSON.parse(userVsTotal);

                var data = google.visualization.arrayToDataTable([
                    ['Task', 'Hours per Day'],
                    ['You', userVsTotalObj.countUserRecognitions],
                    ['School', userVsTotalObj.countAllRecognitions]
                ]);

                // Optional; add a title and set the width and height of the chart
                var options = {
                    'title':'{{ app.user.firstName }} ~ all school [received]',
                    'pieSliceText': 'value', // if remove it, displays % instead of value
                    'slices': {
                        0: { color: 'orange' },
                        1: { color: 'purple' }
                    },
                    'width':400,
                    'height':300
                };

                // Display the chart inside the <div> element with id="piechart"
                var chart = new google.visualization.PieChart(document.getElementById('piechart'));
                chart.draw(data, options);
            }
        });
    </script>
{% endblock %}